#overview-quiz-main #design .design-emphasis {
  border-color: var(--accent) !important; /* 보라색 테두리 */
  box-shadow: 0 0 0 2px rgba(83, 52, 131, 0.35);
}
:root {
  --bg-dark: #1a1a2e;
  --bg-light: #16213e;
  --primary: #e94560;
  --secondary: #0f3460;
  --accent: #533483;
  --text-light: #f0f0f0;
  --text-dark: #a0a0a0;
  --correct: #39ff14; /* Neon Green */
  --incorrect: #ff5733; /* Bright Orange-Red */
  --retrying: #ffc300; /* Amber/Yellow for retry */
  --revealed: #00ffff; /* Cyan */

  /* Typography */
  --font-base: 'Noto Sans KR', sans-serif;
  --font-display: 'Press Start 2P', cursive;

  /* Spacing scale */
  --space-xs: 0.4rem; /* 4px */
  --space-sm: 0.8rem; /* 8px */
  --space-md: 1.6rem; /* 16px */
  --space-lg: 2.4rem; /* 24px */
  --space-xl: 3.2rem; /* 32px */

  font-size: 10px; /* Base font size for rem units */
}

/* Start modal: ensure first row lists four primary topics in order */
#start-modal .topic-selector {
  display: grid;
  gap: 1rem;
}
@media (min-width: 900px) {
  #start-modal .topic-selector {
    grid-template-columns: repeat(4, minmax(120px, 1fr));
  }
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: var(--font-base);
  background-color: var(--bg-dark);
  color: var(--text-light);
  line-height: 1.7;
  overflow-x: hidden;
  font-weight: 400;
}

/* Global UX enhancements */
html {
  scroll-behavior: smooth;
  scroll-padding-top: 12rem; /* keep focused content clear of fixed header */
}

/* Accessible skip link */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--primary);
  color: var(--text-light);
  padding: 0.8rem 1.2rem;
  z-index: 1000;
  transition: top 0.2s ease;
}
.skip-link:focus,
.skip-link:focus-visible {
  top: 0;
  outline: 3px solid var(--revealed);
  outline-offset: 2px;
}

/* Focus visible rings for keyboard users */
.btn:focus-visible,
.tab:focus-visible,
input:focus-visible,
.slot-machine .reel:focus-visible,
.competency-tab:focus-visible {
  outline: 3px solid var(--revealed);
  outline-offset: 2px;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto;
  }
}

/* Visually hidden utility for screen reader only text */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

#combo-counter {
  font-family: var(--font-display);
}

header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: var(--bg-light);
  border-bottom: 4px solid var(--primary);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-sm) var(--space-lg);
  z-index: 100;
  flex-wrap: wrap;
}

.hud-left,
.hud-center,
.hud-right {
  flex: 1;
  display: flex;
  align-items: center;
}

.hud-left {
  justify-content: flex-start;
}

.hud-center {
  justify-content: center;
  gap: 2rem;
}

.hud-right {
  justify-content: flex-end;
  gap: 1.5rem;
}

header h1 {
  font-family: var(--font-display);
  font-size: 2.2rem;
  color: var(--primary);
  text-shadow: 3px 3px 0px var(--secondary);
}

.kitsch-box {
  background: var(--secondary);
  padding: var(--space-sm) var(--space-md);
  border: 3px solid var(--primary);
  box-shadow: 4px 4px 0px var(--bg-dark);
  border-radius: var(--space-sm);
}

#time {
  font-family: 'Source Code Pro', monospace;
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--text-light);
}

#bar {
  width: 16rem;
  height: 1rem;
  background: var(--bg-dark);
  border: 2px solid var(--primary);
  overflow: hidden;
  margin-top: 0.5rem;
  border-radius: 4px;
}

#bar > div {
  height: 100%;
  width: 100%;
  background: var(--primary);
  transition: width 1s linear;
  border-radius: 2px;
}

.slot-machine {
  display: flex;
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.slot-machine .reel {
  width: 3rem;
  height: 3rem;
  background: var(--secondary);
  border: 3px solid var(--primary);
  border-radius: 4px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 2rem;
  font-family: 'Press Start 2P', cursive;
  transition: transform 0.3s, opacity 0.3s;
}

.slot-machine .reel.revealed {
  animation: reel-pop 0.3s ease-out;
}

@keyframes reel-pop {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.slot-machine.hidden {
  display: none;
}

/* Flash reels when the slot machine hits a win */
.slot-machine.win {
  animation: slot-win-rotate 1s ease-out;
}

.slot-machine.win .reel {
  animation: reel-win-flash 0.4s ease-out 0s 2;
}

@keyframes slot-win-rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes reel-win-flash {
  0%,
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 var(--accent);
  }
  50% {
    transform: scale(1.3);
    box-shadow: 0 0 15px var(--accent);
  }
}
.slot-machine.win-lights {
  box-shadow: 0 0 10px var(--accent);
  animation: win-lights-glow 0.4s ease-in-out 0s 2;
}

.slot-machine.win.win-lights {
  animation: slot-win-rotate 1s ease-out, win-lights-glow 0.4s ease-in-out 0s 2;
}

@keyframes win-lights-glow {
  0% {
    box-shadow: 0 0 5px var(--accent);
  }
  50% {
    box-shadow: 0 0 20px var(--accent);
  }
  100% {
    box-shadow: 0 0 5px var(--accent);
  }
}

.btn {
  cursor: pointer;
  font-family: var(--font-base);
  font-weight: 700;
  color: var(--text-light);
  background: var(--accent);
  border: 3px solid var(--primary);
  padding: var(--space-sm) var(--space-md);
  box-shadow: 5px 5px 0px var(--secondary);
  transition: transform 0.1s, box-shadow 0.1s;
  font-size: 1.4rem;
  white-space: nowrap;
  border-radius: var(--space-sm);
}
.btn:hover {
  transform: translate(2px, 2px);
  box-shadow: 3px 3px 0px var(--secondary);
}
.btn:active {
  transform: translate(5px, 5px);
  box-shadow: 0px 0px 0px var(--secondary);
}
.btn.hidden {
  display: none;
}
.btn:disabled {
  background: #444;
  color: #888;
  cursor: not-allowed;
  border-color: #555;
  box-shadow: none;
  transform: none;
}

#combo-counter {
  color: var(--incorrect);
  font-size: 2.2rem; /* Match H1 size */
  font-weight: 800;
  text-shadow: 2px 2px 0px var(--primary);
}
.combo-pop {
  animation: combo-pop-animation 0.3s ease-out;
}
@keyframes combo-pop-animation {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.4);
  }
  100% {
    transform: scale(1);
  }
}
.hidden {
  display: none;
}

main,
.container {
  padding: 12rem var(--space-md) var(--space-lg);
  max-width: 1024px;
  margin: 0 auto;
}

.grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: var(--space-md);
}

.icon {
  width: 2.4rem;
  height: 2.4rem;
  fill: currentColor;
}

.tabs {
  display: flex;
  gap: 1rem;
  margin-bottom: 2.5rem;
}
.tab {
  flex: 1;
  text-align: center;
  padding: 1.2rem 0;
  background: var(--secondary);
  border: 3px solid var(--primary);
  cursor: pointer;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-dark);
  transition: all 0.2s;
  border-radius: 8px;
}
.tab.active {
  background: var(--primary);
  color: var(--text-light);
  transform: translateY(3px);
  box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
}
/* Blur titles for disabled sections in Practical model */
/* Generic blur for disabled tabs across all model subjects */
.tabs .tab.practical-disabled {
  filter: blur(8px);
  opacity: 0.2;
  pointer-events: none;
}

/* Generic blur for disabled sections across all model subjects */
section.practical-section-disabled {
  filter: blur(8px);
}

.accordion {
  display: flex;
  flex-direction: column;
}

section {
  display: none;
}
section.active {
  display: block;
}

h2 {
  text-align: center;
  color: var(--text-light);
  margin: 2rem 0 3rem 0;
  font-size: 2.4rem;
  font-weight: 900;
  background: var(--accent);
  padding: 1.5rem;
  border: 3px solid var(--primary);
  border-radius: 12px;
}

.grade-container {
  display: flex;
  gap: 2.5rem;
  flex-wrap: wrap;
  margin-bottom: 2rem;
}
.grade-container > div {
  flex: 1;
  min-width: 320px;
  background: var(--bg-light);
  border: 3px solid var(--primary);
  padding: 2rem;
  border-radius: 12px;
}
.grade-title {
  background: var(--primary);
  padding: 1rem;
  font-size: 1.8rem;
  font-weight: 900;
  text-align: center;
  color: var(--text-light);
  margin: -2rem -2rem 2rem -2rem;
  border-bottom: 3px solid var(--primary);
  border-radius: 8px 8px 0 0;
}

table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0 1.5rem;
  table-layout: fixed; /* prevent wide content from expanding container */
}
th,
td {
  padding: 0;
  text-align: left;
  vertical-align: top;
  border-bottom: none;
  font-size: 1.6rem;
  font-weight: 700;
}
th {
  padding-right: 1.5rem;
  color: var(--text-dark);
  min-width: 8rem; /* Ensure header text is fully visible */
  width: 12rem; /* Reduce header column width so inputs can expand */
  white-space: nowrap;
}

td {
  display: flex;
  flex-direction: column;
  gap: 1rem; /* Consistent spacing between inputs */
  word-break: break-word; /* ensure long text wraps within cell */
}

td.two-col-answers {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
}

/* Force one-column layout for model topic sections */
#ethics-quiz-main td.two-col-answers,
#practical-quiz-main td.two-col-answers {
  display: flex;
  flex-direction: column;
}

@media (max-width: 480px) {
  td.two-col-answers {
    grid-template-columns: 1fr;
  }
}

td input {
  width: 100%;
  padding: 1.2rem;
  font-size: 1.4rem;
  border: 2px solid var(--text-dark); /* subtle gray border */
  background: var(--bg-dark);
  color: var(--text-light);
  font-family: 'Noto Sans KR', sans-serif;
  caret-color: var(--primary);
  margin-bottom: 0; /* Removed margin as gap is used now */
  transition: all 0.2s ease;
  border-radius: 8px;
}
td input.fit-answer {
  width: auto;
  display: inline-block;
  min-width: 14ch;
}
td input:focus {
  outline: none;
  border-color: var(--primary);
  background: var(--secondary);
  box-shadow: 0 0 10px rgba(233, 69, 96, 0.5);
}
td input.correct {
  border-color: var(--correct);
  color: var(--correct);
}
td input.incorrect {
  border-color: var(--incorrect);
  color: var(--incorrect);
}
td input.retrying {
  border-color: var(--retrying);
  color: var(--retrying);
}
td input.revealed {
  color: var(--revealed);
  border-color: var(--revealed);
  background: var(--bg-light);
}

td input.shake {
  animation: dori-dori 0.3s;
}

@keyframes dori-dori {
  0%,
  100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-4px);
  }
  75% {
    transform: translateX(4px);
  }
}

/* Correct answer subtle pulse (distinct from wrong shake) */
td input.correct.correct-pulse {
  animation: correct-pulse 420ms ease-out;
}

@keyframes correct-pulse {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 rgba(57, 255, 20, 0);
  }
  40% {
    transform: scale(1.02);
    box-shadow: 0 0 12px rgba(57, 255, 20, 0.45);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 rgba(57, 255, 20, 0);
  }
}

th.sub-area-cell {
  min-width: 22rem;
}

/* Make sub-area inputs styled consistently regardless of container */
input.sub-area-input {
  width: 100%;
  padding: 1.2rem;
  font-size: 1.4rem;
  border: 3px solid var(--accent);
  background: var(--primary);
  color: var(--text-light);
  border-radius: 4px;
  font-weight: 600;
  transition: all 0.3s ease;
}

/* Universal sub-area input state styles - CRITICAL OVERRIDE */
.sub-area-input.correct,
input.sub-area-input.correct,
th.sub-area-cell .sub-area-input.correct {
  border: 3px solid #39ff14 !important;
  color: #39ff14 !important;
  background: rgba(57, 255, 20, 0.3) !important;
  font-weight: 700 !important;
  box-shadow: 0 0 8px rgba(57, 255, 20, 0.5) !important;
}

.sub-area-input.incorrect,
input.sub-area-input.incorrect,
th.sub-area-cell .sub-area-input.incorrect {
  border: 3px solid #ff5733 !important;
  color: #ff5733 !important;
  background: rgba(255, 87, 51, 0.3) !important;
  font-weight: 700 !important;
  box-shadow: 0 0 8px rgba(255, 87, 51, 0.5) !important;
}

.sub-area-input.retrying,
input.sub-area-input.retrying,
th.sub-area-cell .sub-area-input.retrying {
  border: 3px solid #ffc300 !important;
  color: #ffc300 !important;
  background: rgba(255, 195, 0, 0.3) !important;
  font-weight: 700 !important;
  box-shadow: 0 0 8px rgba(255, 195, 0, 0.5) !important;
}

.sub-area-input.revealed,
input.sub-area-input.revealed,
th.sub-area-cell .sub-area-input.revealed {
  border: 3px solid #00ffff !important;
  color: #00ffff !important;
  background: rgba(0, 255, 255, 0.3) !important;
  font-weight: 700 !important;
  box-shadow: 0 0 8px rgba(0, 255, 255, 0.5) !important;
}

/* Fix overlap and unify UI in PE > 신체활동 예시 and Physical Activity */
#pe-quiz-main #activity-examples table,
#physical-activity-quiz-main table {
  table-layout: fixed; /* keep wide second column for inputs */
}
#pe-quiz-main #activity-examples th.sub-area-cell,
#physical-activity-quiz-main th.sub-area-cell {
  width: 20rem; /* narrower than before to free space for right column */
}
#pe-quiz-main #activity-examples th.sub-area-cell,
#pe-quiz-main #activity-examples td,
#physical-activity-quiz-main th.sub-area-cell,
#physical-activity-quiz-main td {
  vertical-align: top;
}
#pe-quiz-main #activity-examples td,
#physical-activity-quiz-main td {
  display: flex; /* ensure column layout fills full width */
  flex-direction: column;
}
#pe-quiz-main #activity-examples .activity-group,
#physical-activity-quiz-main .activity-group {
  width: 100%; /* groups span entire td width */
}
#pe-quiz-main #activity-examples .activity-group,
#physical-activity-quiz-main .activity-group {
  display: flex;
  flex-direction: column; /* place activity first, examples below */
}
#pe-quiz-main #activity-examples .activity-group > .activity-input,
#physical-activity-quiz-main .activity-group > .activity-input {
  display: block;
  width: 100%;
  margin-bottom: 0.8rem; /* separate from examples */
}
#pe-quiz-main #activity-examples .activity-group > .example-input,
#physical-activity-quiz-main .activity-group > .example-input {
  width: auto;
}
#pe-quiz-main #activity-examples th.sub-area-cell .sub-area-input,
#physical-activity-quiz-main th.sub-area-cell .sub-area-input {
  display: block;
  width: 100%;
  transition: all 0.2s ease; /* match other inputs */
}
/* Physical activity sections use consistent base styling */
/* Ensure state colors are clearly visible for sub-area inputs - High specificity */
#pe-quiz-main #activity-examples th.sub-area-cell input.sub-area-input.correct,
#physical-activity-quiz-main th.sub-area-cell input.sub-area-input.correct {
  border-color: var(--correct) !important;
  color: var(--correct) !important;
  background: rgba(57, 255, 20, 0.2) !important;
  box-shadow: 0 0 8px rgba(57, 255, 20, 0.3) !important;
}
#pe-quiz-main #activity-examples th.sub-area-cell input.sub-area-input.incorrect,
#physical-activity-quiz-main th.sub-area-cell input.sub-area-input.incorrect {
  border-color: var(--incorrect) !important;
  color: var(--incorrect) !important;
  background: rgba(255, 87, 51, 0.2) !important;
  box-shadow: 0 0 8px rgba(255, 87, 51, 0.3) !important;
}
#pe-quiz-main #activity-examples th.sub-area-cell input.sub-area-input.retrying,
#physical-activity-quiz-main th.sub-area-cell input.sub-area-input.retrying {
  border-color: var(--retrying) !important;
  color: var(--retrying) !important;
  background: rgba(255, 195, 0, 0.2) !important;
  box-shadow: 0 0 8px rgba(255, 195, 0, 0.3) !important;
}
#pe-quiz-main #activity-examples th.sub-area-cell input.sub-area-input.revealed,
#physical-activity-quiz-main th.sub-area-cell input.sub-area-input.revealed {
  border-color: var(--revealed) !important;
  color: var(--revealed) !important;
  background: rgba(0, 255, 255, 0.2) !important;
  box-shadow: 0 0 8px rgba(0, 255, 255, 0.3) !important;
}

td input.activity-input {
  border: 3px solid var(--accent);
  background: var(--primary);
  font-weight: 800;
  color: var(--text-light);
}

td input.activity-input.correct {
  border-color: var(--correct);
  color: var(--correct);
}

td input.activity-input.incorrect {
  border-color: var(--incorrect);
  color: var(--incorrect);
}

td input.activity-input.retrying {
  border-color: var(--retrying);
  color: var(--retrying);
}

td input.activity-input.revealed {
  border-color: var(--revealed);
  color: var(--revealed);
  background: var(--bg-light);
}

td input.example-input {
  border: 2px dashed var(--text-dark);
  background: var(--bg-light);
  margin-left: 0;
  border-left: none;
}

td input.example-input.correct {
  border-color: var(--correct);
  color: var(--correct);
  border-style: solid;
}

td input.example-input.incorrect {
  border-color: var(--incorrect);
  color: var(--incorrect);
  border-style: solid;
}

td input.example-input.retrying {
  border-color: var(--retrying);
  color: var(--retrying);
  border-style: solid;
}

td input.example-input.revealed {
  border-color: var(--revealed);
  color: var(--revealed);
  background: var(--bg-light);
  border-style: solid;
}

td input.sub-step {
  margin-left: 1rem;
  width: calc(100% - 1rem);
  border: 2px dashed var(--primary);
  background: var(--bg-light);
}

/* Ensure dashed sub-step inputs in PSR (개인적⋅사회적 책임감 지도 모형) section */
#psr-pe td input.sub-step,
#psr-pe td input[placeholder="단계 설명"] {
  border-style: dashed;
  border-color: var(--primary);
  background: var(--bg-light);
}

td input.activity-input:not(:first-child) {
  margin-top: 1.5rem;
}
.activity-group {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  padding: 1rem;
  border: 2px dashed var(--secondary);
  border-radius: 8px;
  margin-bottom: 1rem; /* prevent overlap with next group */
}

.activity-group .activity-input {
  flex: 1 1 100%;
  width: 100%;
}

.activity-group .example-input {
  flex: 0 0 auto;
  width: auto;
  min-width: 9ch;
  text-align: center;
  padding: 1.2rem; /* align with td input default */
}

.activity-group + .activity-group {
  margin-top: 1.5rem;
}

/* Additional improvements for physical activity sections */
#physical-activity-quiz-main .activity-group .example-input {
  margin: 0.2rem;
  flex: 0 1 auto;
  min-width: 8ch;
  max-width: 15ch;
  font-size: 1.1rem;
}

#physical-activity-quiz-main .activity-group {
  margin-bottom: 1.5rem;
  padding: 1.2rem;
}

#physical-activity-quiz-main td {
  padding: 1rem;
}

.grade-container table tr:not(:last-child) > * {
  border-bottom: 3px dotted var(--secondary);
  padding-bottom: 1.5rem;
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 200;
  opacity: 0;
  transition: opacity 0.3s ease;
}
.modal-overlay.active {
  display: flex;
  opacity: 1;
}
.modal-content {
  background: var(--bg-light);
  padding: var(--space-lg) var(--space-xl);
  text-align: center;
  border: 4px solid var(--primary);
  box-shadow: 10px 10px 0px var(--secondary);
  transform: scale(0.9);
  transition: transform 0.3s ease;
  width: 90%;
  max-width: 600px;
  border-radius: var(--space-md);
}
.modal-overlay.active .modal-content {
  transform: scale(1);
}
.modal-content h2 {
  color: var(--primary);
  font-size: 3rem;
  margin-bottom: 1.5rem;
  background: none;
  border: none;
  padding: 0;
  font-family: var(--font-display);
}
.modal-content p {
  font-family: var(--font-base);
  color: var(--text-light);
  font-size: 1.8rem;
  margin-bottom: 2.5rem;
}

#guide-modal .modal-content {
  text-align: left;
  padding: 3rem 3.5rem;
}
#guide-modal h3 {
  text-align: center;
  font-family: 'Press Start 2P', cursive;
  color: var(--correct);
  margin-bottom: 3rem;
  font-size: 2.4rem;
}
.guide-steps {
  display: flex;
  flex-direction: column;
  gap: 2.5rem;
}
.guide-step {
  display: flex;
  align-items: flex-start;
  gap: 1.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px dotted var(--secondary);
}
.guide-steps .guide-step:last-child {
  border-bottom: none;
  padding-bottom: 0;
}
.guide-label {
  font-family: 'Press Start 2P', cursive;
  color: var(--primary);
  font-size: 1.4rem;
  flex-shrink: 0;
  padding-top: 2px;
}
.guide-text {
  font-size: 1.6rem;
  line-height: 1.7;
}
.guide-text strong {
  color: var(--revealed);
  font-weight: 700;
}
#guide-modal .tip {
  font-size: 1.4rem;
  text-align: center;
  color: var(--text-dark);
  margin-top: 3rem;
  background: var(--secondary);
  padding: 1rem;
  border-radius: 8px;
}
#close-guide-btn {
  display: block;
  margin: 2.5rem auto 0;
  font-family: 'Press Start 2P', cursive;
}
#result-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 0.8rem;
  margin-bottom: 2rem;
  flex: 1;
  justify-content: center;
}
#result-details {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.8rem;
  flex-wrap: nowrap;
}
#result-info p {
  font-size: 1.6rem;
  margin: 0;
  background: var(--secondary);
  padding: 0.5rem 1rem;
  border: 2px solid var(--primary);
  box-shadow: 2px 2px 0 var(--bg-dark);
  border-radius: 6px;
  flex-shrink: 0;
  white-space: nowrap;
}
#result-info .label {
  font-weight: bold;
  margin-right: 0.5rem;
}
.progress-container {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-top: 1rem;
  width: 100%;
  max-width: 400px;
}
.progress-bar {
  flex: 1;
  height: 20px;
  background: var(--bg-dark);
  border: 2px solid var(--primary);
  box-shadow: 2px 2px 0 var(--secondary);
  border-radius: 10px;
  overflow: hidden;
}
.progress-fill {
  height: 100%;
  width: 0%;
  background: var(--primary);
  transition: width 0.3s ease;
}
#result-percentage {
  font-size: 1.6rem;
  min-width: 3rem;
  text-align: right;
  font-family: 'Press Start 2P', cursive;
}

.result-buttons {
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  gap: 1rem;
}

.result-buttons .btn {
  width: 12rem;
}

.time-setter,
.subject-selector,
.mode-selector,
.topic-selector {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  margin: 2rem 0;
  flex-wrap: wrap;
}

.subject-break {
  flex-basis: 100%;
  height: 0;
}

/* Group two subject buttons as a minimal segmented control */
.subject-btn-group {
  display: inline-flex;
  gap: 0;
  border: 2px solid var(--primary);
  border-radius: 8px;
  overflow: hidden;
}
.subject-btn-group .subject-btn {
  border-radius: 0;
  margin: 0;
}
.subject-btn-group .subject-btn + .subject-btn {
  border-left: 2px solid var(--primary);
}

/* Arrange topic buttons in two rows with up to four per row */
.topic-selector {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
}
.topic-btn {
  width: 100%;
}
#time-setting-display {
  font-family: 'Source Code Pro', monospace;
  font-size: 3rem;
  color: var(--text-light);
  width: 120px;
  text-align: center;
}
.time-control-btn {
  font-size: 2rem;
  padding: 0.5rem 1.5rem;
}
.subject-btn,
.mode-btn,
.topic-btn,
#random-subject-btn {
  font-size: 1.6rem;
}
.subject-btn.selected,
.mode-btn.selected,
.topic-btn.selected {
  background: var(--primary);
  color: var(--text-light);
  transform: translateY(3px);
  box-shadow: 3px 3px 0px var(--secondary);
}

.subject-btn.is-selecting {
  background: var(--accent);
  transform: scale(1.1) translateY(0);
  box-shadow: 0 0 15px var(--accent);
  transition: all 0.1s ease-in-out;
}
#random-subject-btn {
  background-color: #524360; /* 채도가 낮은 보라색 */
}

#start-game-btn {
  background-color: var(--primary);
  color: var(--text-light);
  padding: 1.2rem 2.5rem;
  margin-top: 2rem;
  font-size: 1.8rem;
  animation: pulse-start-btn 2s infinite;
}

@keyframes pulse-start-btn {
  0% {
    transform: scale(1);
    box-shadow: 5px 5px 0px var(--secondary);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 8px 8px 15px var(--secondary);
  }
  100% {
    transform: scale(1);
    box-shadow: 5px 5px 0px var(--secondary);
  }
}

#hard-core-description p {
  margin-bottom: 0.5rem;
  font-size: 1.4rem;
}

/* Activity Heatmap */
#activity-heatmap {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
  justify-items: center;
  margin: 1rem auto 0;
}
.heatmap-cell {
  width: 20px;
  height: 20px;
  background: #333;
  border-radius: 4px;
}
.heatmap-cell.level-1 {
  background: #d1f2d6;
}
.heatmap-cell.level-2 {
  background: #a3e4b6;
}
.heatmap-cell.level-3 {
  background: #6fcf97;
}
.heatmap-cell.level-4 {
  background: #4c9f70;
}
.heatmap-cell.empty {
  background: transparent;
}

/* Heatmap panel placement next to settings */
#start-modal .modal-boxes {
  display: flex;
  gap: 2rem;
  align-items: flex-start;
}
#settings-panel {
  width: 600px;
  max-width: 600px;
  flex-shrink: 0;
  overflow-y: auto;
}
#heatmap-panel {
  max-width: 260px;
  text-align: center;
  flex-shrink: 0;
}
#heatmap-panel h2 {
  margin-bottom: 1rem;
  font-size: 1.6rem;
  font-family: 'Noto Sans KR', sans-serif;
  word-break: keep-all;
}

/* Character Assistant Styles */
#character-assistant {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 80px;
  height: 80px;
  z-index: 99;
  transition: all 0.5s ease-in-out;
}
.mushroom {
  width: 100%;
  height: 100%;
  position: relative;
  transition: transform 0.3s ease-out;
}
.mushroom-cap {
  width: 100%;
  height: 65%;
  background: #d9534f;
  border: 3px solid #000;
  border-radius: 50% 50% 20% 20%;
  position: absolute;
  top: 0;
  z-index: 2;
  transition: background-color 0.3s, box-shadow 0.3s;
}
.mushroom-cap .dot {
  position: absolute;
  width: 15px;
  height: 15px;
  background: white;
  border-radius: 50%;
  border: 2px solid #000;
}
.mushroom-cap .dot:nth-child(1) {
  top: 15%;
  left: 25%;
}
.mushroom-cap .dot:nth-child(2) {
  top: 30%;
  left: 60%;
}
.mushroom-cap .dot:nth-child(3) {
  top: 45%;
  left: 20%;
}

.mushroom-stem {
  width: 50%;
  height: 50%;
  background: #f7e5d3;
  border: 3px solid #000;
  border-bottom: none;
  border-radius: 10px 10px 0 0;
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1;
}
.character-eye {
  position: absolute;
  width: 6px;
  height: 8px;
  background-color: #000;
  border-radius: 50%;
  top: 40%;
  transition: all 0.2s ease;
  z-index: 3;
}
.character-eye.left {
  left: 30%;
}
.character-eye.right {
  right: 30%;
}

.spore {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  opacity: 0;
  animation: spore-float 1.2s ease-out forwards;
}

/* Character Animations */
#character-assistant.idle .mushroom {
  animation: idle-sway 3s ease-in-out infinite;
}
@keyframes idle-sway {
  0%,
  100% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(10deg);
  }
}

#character-assistant.happy .mushroom {
  animation: happy-hop 0.6s ease-out;
}
@keyframes happy-hop {
  0%,
  100% {
    transform: translateY(0) scale(1, 1);
  }
  20% {
    transform: translateY(5px) scale(1.1, 0.9);
  } /* Squish down */
  50% {
    transform: translateY(-20px) scale(0.9, 1.1);
  } /* Jump up and stretch */
  80% {
    transform: translateY(2px) scale(1.05, 0.95);
  } /* Land and squish again */
}

@keyframes spore-float {
  0% {
    transform: translate(0, 0) scale(0);
    opacity: 0.5;
  }
  20% {
    transform: translate(var(--x-1), -20px) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(var(--x-2), -80px) scale(0);
    opacity: 0;
  }
}

#character-assistant.sad .mushroom-cap {
  background-color: #533483;
}
#character-assistant.sad .mushroom {
  transform: rotate(-15deg) translateY(5px);
}

#character-assistant.worried .mushroom {
  animation: worried-shake 0.3s linear infinite;
}
@keyframes worried-shake {
  0%,
  100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-2px);
  }
  75% {
    transform: translateX(2px);
  }
}

#character-assistant.cheer .mushroom {
  animation: cheer-dance 1.2s ease-in-out infinite;
}
@keyframes cheer-dance {
  0%,
  100% {
    transform: rotate(0);
  }
  25% {
    transform: rotate(-20deg);
  }
  75% {
    transform: rotate(20deg);
  }
}

/* Combo Growth Styles */
#character-assistant.combo-level-1 .mushroom {
  transform: scale(1.1);
}
#character-assistant.combo-level-2 .mushroom {
  transform: scale(1.2);
}
#character-assistant.combo-level-2 .mushroom-cap {
  box-shadow: 0 0 10px gold, 0 0 15px gold;
}
#character-assistant.combo-level-3 .mushroom {
  transform: scale(1.3);
}
#character-assistant.combo-level-3 .mushroom-cap {
  animation: rainbow-glow 2s infinite alternate;
}

@keyframes rainbow-glow {
  0% {
    box-shadow: 0 0 8px #ff0000, 0 0 12px #ff7f00;
  }
  20% {
    box-shadow: 0 0 8px #ff7f00, 0 0 12px #ffff00;
  }
  40% {
    box-shadow: 0 0 8px #ffff00, 0 0 12px #00ff00;
  }
  60% {
    box-shadow: 0 0 8px #00ff00, 0 0 12px #0000ff;
  }
  80% {
    box-shadow: 0 0 8px #0000ff, 0 0 12px #4b0082;
  }
  100% {
    box-shadow: 0 0 8px #4b0082, 0 0 12px #9400d3;
  }
}

/* Devil Mode Styles */
.devil-horns,
.fire-effect {
  display: none;
}
#character-assistant.devil-mode .devil-horns {
  display: block;
}
#character-assistant.devil-mode .mushroom-cap {
  background: #a00000;
}
#character-assistant.devil-mode.happy .fire-effect {
  display: flex;
}

#character-assistant.devil-mode.sad .mushroom-cap {
  background: #2c003e; /* Very dark, menacing purple */
  box-shadow: 0 0 15px #ff0000, inset 0 0 10px #000;
}
#character-assistant.devil-mode.sad .character-eye {
  background: #ff0000; /* Glowing red eyes */
  box-shadow: 0 0 10px #ff0000;
}

.devil-horns {
  position: absolute;
  width: 100%;
  top: -5px;
  z-index: 3;
}
.horn {
  position: absolute;
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-bottom: 20px solid #4d0000;
}
.horn.left {
  left: 10px;
  transform: rotate(-20deg);
}
.horn.right {
  right: 10px;
  transform: rotate(20deg);
}

.fire-effect {
  position: absolute;
  bottom: 0px;
  left: 50%;
  transform: translateX(-50%);
  width: 150%;
  height: 50px;
  justify-content: center;
  filter: blur(1px);
  z-index: 0;
}
.flame {
  width: 15px;
  height: 25px;
  background: orangered;
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  animation: burn 0.8s forwards infinite;
  margin: 0 -4px;
}
.flame:nth-child(2) {
  animation-delay: 0.2s;
}
.flame:nth-child(3) {
  animation-delay: 0.1s;
}
.flame:nth-child(4) {
  animation-delay: 0.3s;
}
.flame:nth-child(5) {
  animation-delay: 0.15s;
}

@keyframes burn {
  0% {
    transform: translateY(0) scale(1);
    opacity: 0.9;
  }
  50% {
    transform: translateY(-40px) scale(1.5);
    opacity: 1;
  }
  100% {
    transform: translateY(-80px) scale(0);
    opacity: 0;
  }
}

/* Result Modal Enhancements */
#progress-modal .modal-content {
  position: relative;
  padding-top: 1rem;
  width: min(80vmin, 500px);
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 1.5rem;
}
#result-character-container {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 2rem;
  min-height: 100px;
  flex: 1;
}
#modal-character-placeholder {
  width: 80px;
  height: 80px;
  position: relative;
}
#modal-character-placeholder > #character-assistant {
  position: static; /* Override fixed positioning */
  bottom: auto;
  right: auto;
}
.speech-bubble {
  position: relative;
  background: var(--bg-dark);
  border-radius: 0.4em;
  padding: 1.5rem;
  min-width: 250px;
  max-width: 90vw;
  text-align: left;
  border: 2px solid var(--primary);
}
.speech-bubble:after {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  width: 0;
  height: 0;
  border: 20px solid transparent;
  border-right-color: var(--primary);
  border-left: 0;
  border-bottom: 0;
  margin-top: -10px;
  margin-left: -22px;
}
#result-dialogue {
  margin: 0;
  font-size: 1.6rem;
  line-height: 1.6;
  white-space: pre-line;
  word-break: keep-all;
}
#result-title {
  font-size: 2.5rem !important;
  margin-bottom: 1rem !important;
  font-family: 'Press Start 2P', cursive;
  color: var(--primary);
  text-shadow: 3px 3px 0 var(--secondary);
}

/* Responsive Styles */
@media (max-width: 768px) {
  :root {
    font-size: 8px;
  }
  header {
    padding: 1rem;
    flex-direction: column;
    height: auto;
    gap: 1rem;
  }
  .hud-left,
  .hud-center,
  .hud-right {
    flex: none;
    width: 100%;
    justify-content: center;
  }
  .hud-right {
    flex-wrap: wrap;
  }
  header h1 {
    margin-bottom: 1rem;
  }
  main {
    padding-top: 22rem; /* Adjust based on new header height */
  }
  .tabs {
    flex-wrap: wrap;
  }
  .tab {
    flex-basis: 45%;
  }
  .grade-container {
    flex-direction: column;
  }
  #character-assistant {
    width: 60px;
    height: 60px;
    bottom: 10px;
    right: 10px;
  }
}
@media (max-width: 480px) {
  .hud-center {
    flex-direction: column;
  }
  main {
    padding-top: 28rem;
  }
  #result-character-container {
    flex-direction: column;
  }
  .speech-bubble {
    max-width: 90vw;
  }
  #result-dialogue {
    font-size: 1.4rem;
  }
  .speech-bubble:after {
    top: 0;
    left: 50%;
    border: 20px solid transparent;
    border-bottom-color: var(--primary);
    border-top: 0;
    border-right: 0;
    margin-left: -10px;
    margin-top: -20px;
  }
}

/* Competency Section Enhancements */

.competency-ui .accordion-header {
  width: 100%;
  text-align: left;
  padding: 1.2rem;
  background: var(--secondary);
  border: 3px solid var(--primary);
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text-light);
  cursor: pointer;
  border-radius: 8px;
  position: relative;
  margin-top: 1rem;
}

.competency-ui .accordion-header::after {
  content: '\25BC';
  position: absolute;
  right: 1rem;
  transition: transform 0.3s;
}

.competency-ui .accordion-header[aria-expanded='true']::after {
  transform: rotate(180deg);
}

.competency-ui .grade-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 2rem;
}

.competency-ui .grade-container > div {
  border-color: var(--accent);
}

.competency-ui th {
  color: var(--primary);
}

.competency-ui .competency-tab-wrapper {
  display: flex;
  justify-content: center;
  margin-bottom: 2rem;
}

.competency-ui .competency-tabs {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 3rem;
}

.competency-ui .competency-column {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

.competency-ui .competency-column .column-title {
  font-weight: 700;
}
.competency-ui .competency-tab {
  flex: 0 0 auto;
  padding: 0.8rem 1.4rem;
  font-size: 1.4rem;
  line-height: 1.2;
  white-space: nowrap;
}
.competency-ui .competency-tab.cleared {
  background: var(--correct);
  color: var(--bg-dark);
}

.competency-ui .integrated-sections {
  display: flex;
  gap: 2rem;
  flex-wrap: wrap;
}

.competency-ui .integrated-sections section {
  flex: 1;
  min-width: 260px;
}

.competency-ui .integrated-sections section:first-child {
  flex: 0 0 100%;
}

.inline-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}
.inline-item input {
  flex: 0 0 auto;
  width: auto;
}

/* Arrange English acquisition blocks vertically */
#english-quiz-main #acquisition .grade-container {
  flex-direction: column;
}
#english-quiz-main #acquisition .grade-container > div {
  flex: none;
  width: 100%;
}

.inline-answers {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  align-items: center;
}

.assessment-list {
  list-style-type: disc;
  margin: 0 0 0 1.5rem;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.sub-list {
  list-style-type: circle;
  margin-left: 2rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

#moral-principles .assessment-list {
  flex-direction: row;
  flex-wrap: wrap;
}

#moral-principles .assessment-list .inline-item {
  flex: 1 1 300px;
}

#moral-methods .methods-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1rem;
}

#moral-methods .method-column {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

#moral-principles-quiz-main .assessment-list {
  list-style: none;
  margin: 0;
  gap: 0.5rem;
}

#moral-principles-quiz-main .sub-list {
  list-style: none;
  margin-left: 1rem;
  gap: 0.5rem;
}

#moral-principles-quiz-main .grade-container {
  gap: 1.5rem;
}

#moral-principles-quiz-main .grade-container > div {
  padding: 1rem;
}

/* Deeper sub-list levels for English quiz */
#english-quiz-main .sub-list .sub-list {
  margin-left: 3rem;
  list-style-type: square;
}

#english-quiz-main .sub-list .sub-list .sub-list {
  margin-left: 4rem;
  list-style-type: disc;
}

/* Visual separators for English quiz hierarchy */
#english-quiz-main .assessment-list > li:not(:last-child) {
  border-bottom: 2px solid var(--text-dark); /* subtle gray border */
  padding-bottom: 1rem;
  margin-bottom: 1rem;
}

#english-quiz-main .sub-list {
  border-left: 2px dashed var(--secondary);
  padding-left: 1rem;
}

/* Creative subject readability tweaks */
#creative-quiz-main .creative-block {
  margin-bottom: 2rem;
  padding: 1rem;
  background: var(--bg-light);
  border: 2px solid var(--secondary);
  border-radius: 8px;
}
#overview-quiz-main .creative-block,
#integrated-course-quiz-main .creative-block,
#moral-course-quiz-main .creative-block {
  margin-bottom: 2rem;
  padding: 1rem;
  background: var(--bg-light);
  border: 2px solid var(--secondary);
  border-radius: 8px;
}
#science-std-quiz-main .achievement-block,
#practical-std-quiz-main .achievement-block,
#math-operation-quiz-main .achievement-block {
  margin: 3rem 0 2rem;
  padding: 1rem;
  background: var(--bg-light);
  border: 3px solid var(--secondary);
  border-radius: 8px;
  position: relative;
}
#science-std-quiz-main .achievement-block::before,
#math-operation-quiz-main .achievement-block::before {
  content: '';
  position: absolute;
  top: -3px;
  left: -3px;
  right: -3px;
  height: 6px;
  background: var(--accent);
  border-radius: 8px 8px 0 0;
}

#science-std-quiz-main .topic-divider {
  height: 14px;
  margin: 1.6rem 0 0.8rem;
  background: linear-gradient(90deg, transparent, var(--secondary) 14%, var(--secondary) 86%, transparent);
  border-radius: 8px;
}
#creative-quiz-main .outline-title {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 1rem;
  color: var(--primary);
}
#science-std-quiz-main .outline-title,
#practical-std-quiz-main .outline-title,
#math-operation-quiz-main .outline-title {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 1rem;
  color: #ff5555;
}

/* 과학 섹션 주제 제목 크기 상향 - # 표기가 있는 것만 */
#science-std-quiz-main .outline-title[data-is-topic="true"] {
  font-size: 2.6rem;
}
#science-std-quiz-main .activity-box {
  border: 2px solid var(--accent);
  border-radius: 12px;
  padding: 0.8rem 0.8rem 0.2rem;
  margin-bottom: 2rem;
  background: transparent;
}
#science-std-quiz-main .activity-box .overview-question {
  margin-bottom: 1.2rem;
}
#science-std-quiz-main .activity-box .overview-question:last-child {
  margin-bottom: 0.6rem;
}
#overview-quiz-main .outline-title,
#integrated-course-quiz-main .outline-title,
#moral-course-quiz-main .outline-title {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 1rem;
  color: var(--primary);
}
#overview-quiz-main .sub-title,
#integrated-course-quiz-main .sub-title,
#moral-course-quiz-main .sub-title {
  font-size: 1.8rem;
  font-weight: 600;
  margin: 1rem 0;
  color: var(--accent);
}
#creative-quiz-main .creative-question {
  display: block;
  line-height: 2.2; /* 줄 간격 확대 */
  font-size: 2rem;
  font-weight: 500;
  overflow-wrap: anywhere; /* handle long questions gracefully */
  padding: 2.5rem; /* 상하좌우 패딩 추가 */
  background: var(--bg-light); /* 배경색 추가 */
  border: 2px solid var(--secondary);
  border-radius: 12px; /* 모서리 둥글게 */
  margin-bottom: 2.5rem; /* 문단 간 간격 조정 */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* 그림자 효과 */
  position: relative;
}
#overview-quiz-main .overview-question,
#integrated-course-quiz-main .overview-question,
#moral-course-quiz-main .overview-question,
#science-std-quiz-main .overview-question,
#practical-std-quiz-main .overview-question,
#math-operation-quiz-main .overview-question,
#practical-quiz-main .overview-question {
  display: block;
  line-height: 2.2; /* 줄 간격 확대 */
  font-size: 2rem;
  font-weight: 500;
  overflow-wrap: anywhere; /* handle long questions gracefully */
  padding: 2.5rem; /* 상하좌우 패딩 추가 */
  background: var(--bg-light); /* 배경색 추가 */
  border: 2px solid var(--secondary);
  border-radius: 12px; /* 모서리 둥글게 */
  margin-bottom: 2.5rem; /* 문단 간 간격 조정 */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* 그림자 효과 */
  position: relative;
}

/* III > 2. 초등학교: 상위 숫자항목 강조 */
#overview-quiz-main #standard .standard-emphasis {
  border-color: var(--accent) !important; /* 보라색 테두리 */
  box-shadow: 0 0 0 2px rgba(83, 52, 131, 0.35);
}
#creative-quiz-main .creative-question:last-child {
  margin-bottom: 1rem; /* 마지막 문단의 하단 여백 조정 */
}
#overview-quiz-main .overview-question:last-child,
#integrated-course-quiz-main .overview-question:last-child,
#moral-course-quiz-main .overview-question:last-child,
#science-std-quiz-main .overview-question:last-child,
#practical-std-quiz-main .overview-question:last-child,
#math-operation-quiz-main .overview-question:last-child,
#practical-quiz-main .overview-question:last-child {
  margin-bottom: 1rem; /* 마지막 문단의 하단 여백 조정 */
}

/* Overview (총론) 계층 들여쓰기 */
#overview-quiz-main .overview-question.overview-top {
  margin-left: 0;
}
#overview-quiz-main .overview-question.overview-sub {
  margin-left: 2rem;
}



/* 모바일 반응형 디자인 개선 */
@media (max-width: 768px) {
  #creative-quiz-main .creative-question,
  #overview-quiz-main .overview-question,
  #integrated-course-quiz-main .overview-question,
  #moral-course-quiz-main .overview-question,
  #science-std-quiz-main .overview-question,
  #practical-std-quiz-main .overview-question,
#math-operation-quiz-main .overview-question,
#practical-quiz-main .overview-question {
    padding: 2rem 1.5rem; /* 모바일에서 패딩 조정 */
    font-size: 1.7rem; /* 모바일에서 폰트 크기 조정 */
    line-height: 2; /* 줄 간격 조정 */
  }
  
  #creative-quiz-main .creative-question input,
  #overview-quiz-main .overview-question input,
  #integrated-course-quiz-main .overview-question input,
  #moral-course-quiz-main .overview-question input,
  #science-std-quiz-main .overview-question input,
  #practical-std-quiz-main .overview-question input,
#math-operation-quiz-main .overview-question input,
#practical-quiz-main .overview-question input {
    font-size: 1.6rem; /* 모바일에서 입력 필드 폰트 크기 */
    padding: 0.5rem 0.8rem; /* 모바일에서 패딩 조정 */
    margin: 0.2rem 0.4rem; /* 모바일에서 마진 조정 */
    min-width: 8ch; /* 모바일에서 최소 너비 조정 */
  }
  
  /* 창체 영역과 활동 모바일 최적화 */
  #creative-quiz-main .assessment-list {
    grid-template-columns: 1fr; /* 모바일에서 단일 열 */
    gap: 1.5rem;
  }
  
  #creative-quiz-main .sub-list {
    grid-template-columns: 1fr; /* 모바일에서 하위 목록도 단일 열 */
    gap: 0.5rem;
  }
  
  /* 모바일에서 입력 필드 크기 조정 */
  #creative-quiz-main .assessment-list > li > input.fit-answer:first-child {
    min-width: 200px;
    font-size: 1.6rem;
  }
  
  #creative-quiz-main .assessment-list > li > ul > li > input.fit-answer:first-child {
    width: 140px !important;
    min-width: 140px !important;
    font-size: 1.3rem;
  }
  
  #creative-quiz-main .assessment-list input.fit-answer {
    font-size: 1.2rem;
    padding: 0.4rem 0.6rem;
    min-width: 100px !important;
    max-width: 120px !important;
  }
  
  #creative-quiz-main .sub-list .inline-item input.fit-answer {
    min-width: 120px !important;
    font-size: 1.2rem;
  }

}
#creative-quiz-main .creative-question input {
  font-size: 1.9rem;
  padding: 0.6rem 1rem; /* 패딩 확대 */
  margin: 0 0.6rem; /* 좌우 마진 확대 */
  border: 2px solid var(--secondary); /* 테두리 강화 */
  border-radius: 8px; /* 모서리 둥글게 */
  background: var(--bg-light); /* 테마 호환 배경색 */
  color: var(--text-light); /* 테마 호환 텍스트 색상 */
  text-align: center;
  width: auto;
  min-width: 10ch; /* 최소 너비 확대 */
  max-width: 100%;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1); /* 내부 그림자 */
  transition: all 0.2s ease; /* 부드러운 전환 효과 */
}
#overview-quiz-main .overview-question input,
#integrated-course-quiz-main .overview-question input,
#moral-course-quiz-main .overview-question input,
#science-std-quiz-main .overview-question input,
#practical-std-quiz-main .overview-question input,
#math-operation-quiz-main .overview-question input,
#practical-quiz-main .overview-question input {
  font-size: 1.9rem;
  padding: 0.6rem 1rem; /* 패딩 확대 */
  margin: 0 0.6rem; /* 좌우 마진 확대 */
  border: 2px solid var(--secondary); /* 테두리 강화 */
  border-radius: 8px; /* 모서리 둥글게 */
  background: var(--bg-light); /* 테마 호환 배경색 */
  color: var(--text-light); /* 테마 호환 텍스트 색상 */
  text-align: center;
  width: auto;
  min-width: 10ch; /* 최소 너비 확대 */
  max-width: 100%;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1); /* 내부 그림자 */
  transition: all 0.2s ease; /* 부드러운 전환 효과 */
}

/* 실과 모형: 인라인 빈칸과 카드 크기 축소 (총론 대비) */
#practical-quiz-main .overview-question {
  padding: 1.6rem; /* 카드 패딩 축소 */
  font-size: 1.7rem; /* 문장 폰트 축소 */
  line-height: 2; /* 줄 간격 약간 축소 */
}
#practical-quiz-main .overview-question input {
  font-size: 1.6rem; /* 인풋 폰트 축소 */
  padding: 0.4rem 0.7rem; /* 인풋 패딩 축소 */
  min-width: 5ch; /* 살짝 여유 */
  margin: 0 0.4rem; /* 좌우 마진 축소 */
}

/* 기술적 문제해결과정 세부 내용: 2열 레이아웃 */
#practical-quiz-main #technical-problem-solving-detail td {
  display: grid;
  grid-template-columns: repeat(2, minmax(300px, 1fr));
  gap: 1rem 1.5rem;
}
@media (max-width: 768px) {
  #practical-quiz-main #technical-problem-solving-detail td {
    grid-template-columns: 1fr; /* 모바일 1열 */
  }
}

/* 문장형 항목의 줄바꿈과 밀도 개선 */
#practical-quiz-main #technical-problem-solving-detail .overview-question {
  display: inline-flex;
  align-items: baseline;
  gap: .6rem;
  flex-wrap: wrap;
  margin: 0; /* td gap 사용 */
}

/* 짧은/중간 길이 인풋 폭 축소 옵션 */
#practical-quiz-main #technical-problem-solving-detail .overview-question input.fit-sm {
  width: auto;
  min-width: 5ch;
}
#practical-quiz-main #technical-problem-solving-detail .overview-question input.fit-md {
  width: auto;
  min-width: 10ch;
}

@media (max-width: 768px) {
  #practical-quiz-main .overview-question {
    padding: 1.2rem; /* 모바일에서 더 컴팩트 */
    font-size: 1.55rem;
    line-height: 1.9;
  }
  #practical-quiz-main .overview-question input {
    font-size: 1.45rem;
    padding: 0.35rem 0.6rem;
    min-width: 4ch; /* 모바일도 약간 여유 */
    margin: 0 0.35rem;
  }
}

#creative-quiz-main .creative-question input:focus {
  outline: none;
  border-color: var(--primary);
  background: var(--bg-light); /* 포커스 시에도 테마 배경색 유지 */
  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2), inset 0 1px 3px rgba(0, 0, 0, 0.1); /* 외부 글로우 효과 */
  transform: translateY(-1px); /* 미세한 상승 효과 */
}
#overview-quiz-main .overview-question input:focus,
#integrated-course-quiz-main .overview-question input:focus,
#moral-course-quiz-main .overview-question input:focus,
#science-std-quiz-main .overview-question input:focus,
#practical-std-quiz-main .overview-question input:focus,
#math-operation-quiz-main .overview-question input:focus,
#practical-quiz-main .overview-question input:focus {
  outline: none;
  border-color: var(--primary);
  background: var(--bg-light); /* 포커스 시에도 테마 배경색 유지 */
  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2), inset 0 1px 3px rgba(0, 0, 0, 0.1); /* 외부 글로우 효과 */
  transform: translateY(-1px); /* 미세한 상승 효과 */
}

#creative-quiz-main .creative-question input.correct {
  border-color: var(--correct);
  color: var(--correct);
  background: rgba(46, 204, 113, 0.1); /* 성공 배경색 */
  box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.2);
}
#overview-quiz-main .overview-question input.correct,
#integrated-course-quiz-main .overview-question input.correct,
#moral-course-quiz-main .overview-question input.correct,
#science-std-quiz-main .overview-question input.correct,
#practical-std-quiz-main .overview-question input.correct,
#math-operation-quiz-main .overview-question input.correct,
#practical-quiz-main .overview-question input.correct {
  border-color: var(--correct);
  color: var(--correct);
  background: rgba(46, 204, 113, 0.1); /* 성공 배경색 */
  box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.2);
}

#creative-quiz-main .creative-question input.incorrect {
  border-color: var(--incorrect);
  color: var(--incorrect);
  background: rgba(231, 76, 60, 0.1); /* 오답 배경색 */
  box-shadow: 0 0 0 2px rgba(231, 76, 60, 0.2);
}
#overview-quiz-main .overview-question input.incorrect,
#integrated-course-quiz-main .overview-question input.incorrect,
#moral-course-quiz-main .overview-question input.incorrect,
#science-std-quiz-main .overview-question input.incorrect,
#practical-std-quiz-main .overview-question input.incorrect,
#math-operation-quiz-main .overview-question input.incorrect,
#practical-quiz-main .overview-question input.incorrect {
  border-color: var(--incorrect);
  color: var(--incorrect);
  background: rgba(231, 76, 60, 0.1); /* 오답 배경색 */
  box-shadow: 0 0 0 2px rgba(231, 76, 60, 0.2);
}

#creative-quiz-main .creative-question input.retrying {
  border-color: var(--retrying);
  color: var(--retrying);
  background: rgba(243, 156, 18, 0.1); /* 재시도 배경색 */
  box-shadow: 0 0 0 2px rgba(243, 156, 18, 0.2);
}
#overview-quiz-main .overview-question input.retrying,
#integrated-course-quiz-main .overview-question input.retrying,
#moral-course-quiz-main .overview-question input.retrying,
#science-std-quiz-main .overview-question input.retrying,
#practical-std-quiz-main .overview-question input.retrying,
#math-operation-quiz-main .overview-question input.retrying,
#practical-quiz-main .overview-question input.retrying {
  border-color: var(--retrying);
  color: var(--retrying);
}

#creative-quiz-main .creative-question input.revealed {
  color: var(--revealed);
  border-color: var(--revealed);
  background: rgba(142, 68, 173, 0.1); /* 정답 공개 배경색 */
  box-shadow: 0 0 0 2px rgba(142, 68, 173, 0.2);
}
#overview-quiz-main .overview-question input.revealed,
#integrated-course-quiz-main .overview-question input.revealed,
#moral-course-quiz-main .overview-question input.revealed,
#science-std-quiz-main .overview-question input.revealed,
#practical-std-quiz-main .overview-question input.revealed,
#math-operation-quiz-main .overview-question input.revealed,
#practical-quiz-main .overview-question input.revealed {
  color: var(--revealed);
  border-color: var(--revealed);
}

/* Wider blanks for the PE (Back) teaching methods section
   Ensure blanks expand within each numbered item */
#pe-back-quiz-main .inline-item {
  width: 100%;
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 0.5rem;
}

#pe-back-quiz-main .inline-item input.fit-answer {
  width: 100%;
  max-width: 100%;
  min-width: 0;
  flex: 1 0 auto;
}
#moral .moral-wrapper {
  display: flex;
  gap: 2rem;
  flex-wrap: wrap;
}

#moral .moral-block {
  flex: 1;
  min-width: 260px;
}

#moral .moral-block h3 {
  margin: 0 0 1rem;
}

#moral .grade-container > div {
  padding: 1rem;
}

/* Art Basic (미술 기본이론) readability + input width normalization */
#art-basic-quiz-main .tabs {
  margin-bottom: 1.6rem;
}

#art-basic-quiz-main h2 {
  margin: 1.2rem 0 2rem;
  padding: 1.2rem;
}

#art-basic-quiz-main .grade-container > div {
  padding: 1.2rem;
}

#art-basic-quiz-main table {
  border-spacing: 0 0.8rem;
}

#art-basic-quiz-main td {
  gap: 0.6rem;
}
#art-basic-quiz-main td input {
  width: auto; /* prevent 100% width inside Art Basic */
}

#art-basic-quiz-main .assessment-list,
#art-basic-quiz-main .sub-list {
  list-style: none;
  margin-left: 0;
  gap: 0.6rem;
}

#art-basic-quiz-main .inline-item {
  gap: 0.4rem;
  flex-wrap: nowrap;
}

/* 창체 영역과 활동 섹션의 입력 필드 최적화 */
/* 2차 레벨: 중간 카테고리 입력 필드 */
#creative-quiz-main .assessment-list > li > ul > li > input.fit-answer:first-child {
  width: 180px !important;
  min-width: 180px !important;
  max-width: 180px !important;
  padding: 0.6rem 1rem;
  margin: 0.3rem 0;
  font-size: 1.5rem;
  font-weight: 600;
  border: 2px solid var(--accent);
  border-radius: 6px;
  background: var(--accent);
  color: var(--text-light);
  text-align: center;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
  transition: all 0.2s ease;
}

/* 3차 레벨: 세부 항목 입력 필드 */
#creative-quiz-main .assessment-list input.fit-answer {
  width: auto !important;
  min-width: 120px !important;
  max-width: 160px !important;
  padding: 0.4rem 0.6rem;
  margin: 0.2rem 0.3rem;
  font-size: 1.3rem;
  border: 1px solid var(--text-dark);
  border-radius: 4px;
  background: var(--secondary);
  color: var(--text-light);
  text-align: center;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease;
}

#creative-quiz-main .assessment-list input.fit-answer:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2), inset 0 1px 2px rgba(0, 0, 0, 0.1);
  transform: translateY(-1px);
}

/* Unify blanks width across Art Basic; override scattered inline min-widths */
#art-basic-quiz-main .inline-item input.fit-answer {
  width: 20ch !important;
  min-width: 20ch !important;
  max-width: 100%;
  text-align: center;
}

/* Apply same width even when input is not wrapped by .inline-item */
#art-basic-quiz-main input.fit-answer {
  width: 20ch !important;
  min-width: 20ch !important;
  max-width: 100%;
  text-align: center;
}

#art-basic-quiz-main .sub-list .inline-item input.fit-answer {
  width: 20ch !important;
  min-width: 20ch !important;
}

/* 창체 영역과 활동 섹션의 다열 카드 레이아웃 */
#creative-quiz-main .assessment-list {
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* 3개 영역을 동일한 비율로 */
  gap: 1.5rem;
  margin: 2rem 0;
  align-items: start; /* 높이가 다를 때 상단 정렬 */
}

#creative-quiz-main .assessment-list > li {
  background: var(--bg-light);
  border: 1px solid var(--secondary);
  border-radius: 8px;
  padding: 1.5rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  transition: all 0.2s ease;
  position: relative;
}

#creative-quiz-main .assessment-list > li:hover {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  transform: translateY(-2px);
  border-color: var(--primary);
}

#creative-quiz-main .assessment-list > li::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--primary);
  border-radius: 8px 8px 0 0;
}

#creative-quiz-main .assessment-list > li > input.fit-answer:first-child {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--text-light);
  background: var(--primary);
  border: 2px solid var(--primary);
  border-radius: 8px;
  margin-bottom: 1.5rem;
  width: 100%;
  max-width: none;
  padding: 1rem 1.2rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  min-width: 250px;
}

/* 창체 하위 목록 스타일 */
#creative-quiz-main .sub-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 1rem;
  margin: 1rem 0 0.5rem 0;
  list-style: none;
  align-items: start;
}

/* 중간 카테고리 제목 (자율활동, 자치활동) - 별도 배경 */
#creative-quiz-main .assessment-list > li > ul > li > input.fit-answer:first-child {
  background: var(--accent);
  color: var(--text-light);
  font-weight: 600;
  font-size: 1.5rem;
  border: 2px solid var(--accent);
  border-radius: 6px;
  padding: 0.8rem 1rem;
  margin-bottom: 1.5rem;
  width: 100%;
  text-align: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
}

/* 세부 항목들의 그룹 배경 (주제탐구, 적응활동, 봉사활동이 함께) */
#creative-quiz-main .assessment-list > li > ul > li > ul.sub-list {
  background: var(--bg-dark);
  border: 1px solid var(--secondary);
  border-radius: 6px;
  padding: 1.5rem;
  margin: 0;
  transition: all 0.2s ease;
}

#creative-quiz-main .assessment-list > li > ul > li > ul.sub-list:hover {
  background: var(--bg-light);
  border-color: var(--primary);
  box-shadow: 0 2px 6px rgba(233, 69, 96, 0.2);
}

/* 상위 카테고리 그룹 (자율활동, 자치활동 전체 그룹) */
#creative-quiz-main .assessment-list > li > ul > li {
  background: transparent; /* 상위 그룹은 배경 없음 */
  border: none;
  padding: 0;
  margin-bottom: 2rem; /* 자율활동과 자치활동 사이 간격 */
}

/* 세부 항목들의 컨테이너 */
#creative-quiz-main .sub-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1rem;
  margin: 0;
  list-style: none;
  align-items: start;
}

/* 세부 항목들 (주제탐구활동, 적응활동 등) - 개별 배경 제거 */
#creative-quiz-main .sub-list .inline-item {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  background: transparent; /* 배경 제거 */
  border: none; /* 테두리 제거 */
  border-radius: 0;
  padding: 0.5rem;
  min-height: auto;
  height: auto;
  transition: all 0.2s ease;
  justify-content: flex-start;
}

/* 개별 항목 호버 효과 제거 - 그룹 단위로만 호버 */

#creative-quiz-main .sub-list .inline-item input.fit-answer {
  width: 100% !important;
  min-width: 120px !important;
  max-width: 100% !important;
  margin: 0.2rem 0;
  font-size: 1.2rem;
  border: 1px solid var(--secondary);
  border-radius: 4px;
  padding: 0.6rem 0.8rem;
  background: var(--bg-light);
  color: var(--text-light);
  transition: all 0.2s ease;
  text-align: center;
  flex-shrink: 0;
}

#creative-quiz-main .sub-list .inline-item input.fit-answer:focus {
  border-color: var(--primary);
  background: var(--bg-light);
  box-shadow: 0 0 0 2px rgba(233, 69, 96, 0.3);
  outline: none;
}

/* 예시 텍스트 스타일 */
#creative-quiz-main .example-text {
  font-size: 1.2rem;
  color: var(--text-dark);
  font-style: italic;
  margin-top: 0.3rem;
  display: block;
  opacity: 0.7;
}

#creative-quiz-main .example-text input.fit-answer {
  display: inline-block;
  width: auto !important;
  min-width: 80px !important;
  max-width: 120px !important;
  margin: 0 0.3rem;
  font-size: 1.1rem;
  font-style: normal;
  background: var(--bg-dark);
  border: 1px solid var(--text-dark);
  color: var(--text-dark);
  padding: 0.3rem 0.5rem;
  opacity: 0.8;
}

/* Multi-column card layout for Art Basic lists */
#art-basic-quiz-main .assessment-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.2rem;
}

#art-basic-quiz-main .assessment-list > li {
  background: var(--bg-light);
  border: 2px solid var(--secondary);
  border-radius: 10px;
  padding: 1rem 1.2rem;
}

#art-basic-quiz-main .sub-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(20ch, 1fr));
  gap: 0.6rem 1rem;
  margin-left: 0;
}

#art-basic-quiz-main .sub-list .inline-item {
  display: flex;
  align-items: center;
  gap: 0.4rem;
}
/* Integrated Model combined section layout */
#integrated-model-quiz-main #integrated-all td {
  display: grid;
  grid-template-columns: repeat(2, minmax(12ch, 1fr));
  gap: 0.6rem 1rem; /* row-gap, col-gap */
  align-items: start;
}
#integrated-model-quiz-main #integrated-all td input {
  width: 100%;
}

/* CRITICAL: Sub-area input color override - HIGHEST SPECIFICITY */
[id*="quiz-main"] th.sub-area-cell input.sub-area-input.correct,
[id*="quiz-main"] input.sub-area-input.correct {
  border-color: #39ff14 !important;
  color: #39ff14 !important;
  background-color: rgba(57, 255, 20, 0.25) !important;
  text-shadow: 0 0 4px rgba(57, 255, 20, 0.5) !important;
}

[id*="quiz-main"] th.sub-area-cell input.sub-area-input.incorrect,
[id*="quiz-main"] input.sub-area-input.incorrect {
  border-color: #ff5733 !important;
  color: #ff5733 !important;
  background-color: rgba(255, 87, 51, 0.25) !important;
  text-shadow: 0 0 4px rgba(255, 87, 51, 0.5) !important;
}

[id*="quiz-main"] th.sub-area-cell input.sub-area-input.retrying,
[id*="quiz-main"] input.sub-area-input.retrying {
  border-color: #ffc300 !important;
  color: #ffc300 !important;
  background-color: rgba(255, 195, 0, 0.25) !important;
  text-shadow: 0 0 4px rgba(255, 195, 0, 0.5) !important;
}

[id*="quiz-main"] th.sub-area-cell input.sub-area-input.revealed,
[id*="quiz-main"] input.sub-area-input.revealed {
  border-color: #00ffff !important;
  color: #00ffff !important;
  background-color: rgba(0, 255, 255, 0.25) !important;
  text-shadow: 0 0 4px rgba(0, 255, 255, 0.5) !important;
}

/* Mini reveal button (2nd wrong attempt) */
.reveal-wrapper {
  position: relative;
  display: inline-block;
}
.mini-reveal-btn {
  position: absolute;
  right: 2px;
  bottom: 2px;
  font-size: 1.1rem;
  line-height: 1;
  padding: 0.2rem 0.4rem;
  border: 1px solid var(--secondary);
  background: var(--bg-light);
  color: var(--text-dark);
  border-radius: 4px;
  cursor: pointer;
  display: none; /* 기본 숨김 */
  z-index: 2;
}
.reveal-wrapper > input.incorrect + .mini-reveal-btn {
  display: inline-block; /* 2차 오답(빨간 테두리)일 때만 노출 */
}
.mini-reveal-btn:hover {
  background: var(--secondary);
  color: var(--text-light);
}

/* Practical model title modal removed */

/* 태블릿 반응형 (768px - 1024px) */
@media (max-width: 1024px) and (min-width: 769px) {
  #creative-quiz-main .assessment-list {
    grid-template-columns: repeat(2, 1fr); /* 태블릿에서 2열 */
    gap: 1.5rem;
  }
  
  #creative-quiz-main .sub-list {
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 0.8rem;
  }
}

@media (max-width: 520px) {
  #integrated-model-quiz-main #integrated-all td {
    grid-template-columns: 1fr; /* 작은 화면에서는 1열 */
  }
  
  /* Math Operation 모바일 최적화 */
  #math-operation-quiz-main .tabs {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  #math-operation-quiz-main .tab {
    padding: 0.6rem 1rem;
    font-size: 1.4rem;
  }
}

/* Model: 단계명 vs 세부 단계 테두리 스타일 구분 */
input[placeholder="단계명"] {
  border-width: 2px;
  border-style: solid;
}
input[placeholder="세부 단계"] {
  border-width: 1px;
  border-style: dashed;
}

/* Moral: 가치 분석 수업모형 '검사이름/검사 이름'도 세부 단계처럼 점선 표기 */
#moral-course-quiz-main input[placeholder="검사이름"],
#moral-course-quiz-main input[placeholder="검사 이름"] {
  border-width: 1px !important;
  border-style: dashed !important;
}

/* Moral: 세부 단계가 테마 기본 테두리에 덮이지 않도록 우선순위 보강 */
#moral-course-quiz-main input[placeholder="세부 단계"] {
  border-width: 1px !important;
  border-style: dashed !important;
}

/* Moral: '검사'를 포함한 placeholder(검사 이름 등) 점선 처리 */
#moral-course-quiz-main input[placeholder*="검사"] {
  border-width: 1px !important;
  border-style: dashed !important;
}

/* Practical(실과): 기술적 문제해결 과정의 하위 단계 점선 처리 */
#practical-quiz-main #technical-problem-solving input.sub-step,
#practical-quiz-main #technical-problem-solving input[placeholder="하위 단계"],
#practical-quiz-main #technical-problem-solving ul.sub-list .inline-item input[placeholder="활동"] {
  border-width: 1px !important;
  border-style: dashed !important;
}

/* Practical: 기술적 문제해결 과정 하위 단계 칩 리스트 레이아웃 */
#practical-quiz-main #technical-problem-solving .sub-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 0.6rem;
  margin: 0.6rem 0 1rem 0;
  list-style: none;
}
#practical-quiz-main #technical-problem-solving .sub-list .inline-item input.fit-answer {
  width: auto;
  min-width: 120px;
  max-width: 100%;
}

/* Math Operation: 수와 연산 과목 스타일 */
#math-operation-quiz-main .tabs {
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
  border-bottom: 2px solid var(--secondary);
  padding-bottom: 1rem;
}

#math-operation-quiz-main .tab {
  padding: 0.8rem 1.5rem;
  background: var(--bg-light);
  border: 2px solid var(--secondary);
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.2s ease;
  color: var(--text-dark);
}

#math-operation-quiz-main .tab:hover {
  background: var(--secondary);
  color: var(--text-light);
  transform: translateY(-2px);
}

#math-operation-quiz-main .tab.active {
  background: var(--primary);
  color: var(--text-light);
  border-color: var(--primary);
  box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
}

/* Global fallback: '검사 이름' 류 필드가 어느 섹션이든 점선 유지 */
input[placeholder="검사 이름"],
input[placeholder="검사이름"],
input[placeholder*="검사 "],
input[placeholder*="검사" i] {
  border-width: 1px !important;
  border-style: dashed !important;
}